{"version":3,"file":"static/js/667.b452422b.chunk.js","mappings":"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","sources":["pages/MoviesPage/MoviesPage.jsx","services/API.js","../node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js"],"sourcesContent":["import { useEffect, useState } from 'react';\nimport { Loader, MovieList, SearchBar } from 'components';\n\nimport API from 'services/API';\nimport { Container } from 'styles/Container.styled';\nimport { useSearchParams } from 'react-router-dom';\n\nconst api = new API();\n\nfunction MoviesPage() {\n  const [disabled, setDisabled] = useState(false);\n  const [movies, setMovies] = useState(null);\n  const [loading, setLoading] = useState(false);\n  const [searchParams] = useSearchParams();\n\n  const query = searchParams.get('query');\n\n  useEffect(() => {\n    if (!query) return;\n    getMovies(query);\n  }, [query]);\n\n  async function getMovies(search) {\n    try {\n      setLoading(true);\n      setDisabled(true);\n      api.query = search;\n      const { results } = await api.fetchQuery();\n      setMovies(results);\n    } catch (error) {\n      console.log(error.message);\n    } finally {\n      setDisabled(false);\n      setLoading(false);\n    }\n  }\n\n  return (\n    <Container>\n      <SearchBar defaultValue={query} disabled={disabled} />\n      {loading && <Loader />}\n      {!!movies?.length && <MovieList array={movies} />}\n      {movies && !movies.length && <p>Nothing found</p>}\n    </Container>\n  );\n}\n\nexport default MoviesPage;\n","export class API {\n  static BASE_URL = 'https://api.themoviedb.org/3';\n  static API_KEY = 'd2e6e8a57d367dba11a443cc5535b322';\n\n  constructor() {\n    this.page = 1;\n    this.query = null;\n  }\n\n  async fetchTrends() {\n    const searchParams = new URLSearchParams({\n      api_key: API.API_KEY,\n    });\n\n    const res = await fetch(\n      `${API.BASE_URL}/trending/movie/day?${searchParams}`\n    );\n    if (!res.ok) {\n      return Promise.reject(new Error('Not found'));\n    }\n    return await res.json();\n  }\n\n  async fetchQuery() {\n    const searchParams = new URLSearchParams({\n      api_key: API.API_KEY,\n      query: this.query,\n    });\n\n    const res = await fetch(`${API.BASE_URL}/search/movie?${searchParams}`);\n    if (!res.ok) {\n      return Promise.reject(new Error('Not found'));\n    }\n    return await res.json();\n  }\n\n  async fetchByID(id) {\n    const searchParams = new URLSearchParams({\n      api_key: API.API_KEY,\n    });\n\n    const res = await fetch(`${API.BASE_URL}/movie/${id}?${searchParams}`);\n    if (!res.ok) {\n      return Promise.reject(new Error('Not found'));\n    }\n    return await res.json();\n  }\n\n  async fetchCast(id) {\n    const searchParams = new URLSearchParams({\n      api_key: API.API_KEY,\n    });\n\n    const res = await fetch(\n      `${API.BASE_URL}/movie/${id}/credits?${searchParams}`\n    );\n    if (!res.ok) {\n      return Promise.reject(new Error('Not found'));\n    }\n    const { cast } = await res.json();\n    return cast.map(({ name, character, id, profile_path }) => ({\n      name,\n      character,\n      id,\n      profile_path,\n    }));\n  }\n\n  async fetchReviews(id) {\n    const searchParams = new URLSearchParams({\n      api_key: API.API_KEY,\n    });\n\n    const res = await fetch(\n      `${API.BASE_URL}/movie/${id}/reviews?${searchParams}`\n    );\n    if (!res.ok) {\n      return Promise.reject(new Error('Not found'));\n    }\n    const { results } = await res.json();\n    return results.map(({ author, content, id }) => ({ author, content, id }));\n  }\n}\n\nexport default API;\n","function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\n\nexport default function _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n        args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n\n      _next(undefined);\n    });\n  };\n}"],"names":["api","API","useState","disabled","setDisabled","movies","setMovies","loading","setLoading","useSearchParams","query","get","search","fetchQuery","results","console","log","message","useEffect","getMovies","defaultValue","length","array","this","page","searchParams","URLSearchParams","api_key","API_KEY","fetch","BASE_URL","res","ok","Promise","reject","Error","json","id","cast","map","name","character","profile_path","author","content","asyncGeneratorStep","gen","resolve","_next","_throw","key","arg","info","value","error","done","then","_asyncToGenerator","fn","self","args","arguments","apply","err","undefined"],"sourceRoot":""}