{"version":3,"file":"static/js/295.416956a8.chunk.js","mappings":"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","sources":["pages/MovieDetailsPage/MovieDetails.style.js","pages/MovieDetailsPage/MovieDetails.jsx","services/API.js","../node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js"],"sourcesContent":["import styled from 'styled-components';\n\nexport const Wrapper = styled.div`\n  display: flex;\n  gap: 30px;\n  padding-top: 30px;\n`;\n\nexport const Aditional = styled.div`\n  margin-top: 10px;\n  border-top: 1px solid black;\n  border-bottom: 1px solid black;\n`;\n","import { useState, useEffect } from 'react';\n\nimport { Link, Outlet, useLocation, useParams } from 'react-router-dom';\nimport { Container } from 'styles/Container.styled';\n\nimport API from 'services/API';\nimport { Aditional, Wrapper } from './MovieDetails.style';\nimport { GoBackBtn, Loader } from 'components';\n\nconst api = new API();\n\nfunction MovieDetails() {\n  const { movieId } = useParams();\n  const [movieDetails, setMovieDetails] = useState(null);\n  const [loading, setLoading] = useState(false);\n\n  const location = useLocation();\n  console.log(location);\n\n  useEffect(() => {\n    getDetails(movieId);\n  }, [movieId]);\n\n  async function getDetails(movieId) {\n    if (!movieId) return;\n    try {\n      setLoading(true);\n      const details = await api.fetchByID(movieId);\n      setMovieDetails(details);\n    } catch (error) {\n      console.log(error.message);\n    } finally {\n      setLoading(false);\n    }\n  }\n  if (!movieDetails) return null;\n  const { original_title, overview, poster_path, vote_average, genres } =\n    movieDetails;\n\n  const backPath = location.state?.from ?? '/';\n\n  return (\n    <Container>\n      {loading && <Loader />}\n      <GoBackBtn path={backPath} />\n      <Wrapper>\n        <div>\n          <img\n            src={poster_path && 'https://image.tmdb.org/t/p/w300' + poster_path}\n            alt={original_title}\n          />\n        </div>\n        <div>\n          <h1>{original_title}</h1>\n          <p>User score: {vote_average}</p>\n          <h2>Overview</h2>\n          <p>{overview}</p>\n          <h3>Genres</h3>\n          <p>{genres.map(genre => genre.name).join(', ')}</p>\n        </div>\n      </Wrapper>\n      <Aditional>\n        <h3>Aditional information</h3>\n        <ul>\n          <li>\n            <Link to=\"cast\" state={{ from: backPath }}>\n              Cast\n            </Link>\n          </li>\n          <li>\n            <Link to=\"reviews\" state={{ from: backPath }}>\n              Reviews\n            </Link>\n          </li>\n        </ul>\n      </Aditional>\n      <Outlet />\n    </Container>\n  );\n}\n\nexport default MovieDetails;\n","export class API {\n  static BASE_URL = 'https://api.themoviedb.org/3';\n  static API_KEY = 'd2e6e8a57d367dba11a443cc5535b322';\n\n  constructor() {\n    this.page = 1;\n    this.query = null;\n  }\n\n  async fetchTrends() {\n    const searchParams = new URLSearchParams({\n      api_key: API.API_KEY,\n    });\n\n    const res = await fetch(\n      `${API.BASE_URL}/trending/movie/day?${searchParams}`\n    );\n    if (!res.ok) {\n      return Promise.reject(new Error('Not found'));\n    }\n    return await res.json();\n  }\n\n  async fetchQuery() {\n    const searchParams = new URLSearchParams({\n      api_key: API.API_KEY,\n      query: this.query,\n    });\n\n    const res = await fetch(`${API.BASE_URL}/search/movie?${searchParams}`);\n    if (!res.ok) {\n      return Promise.reject(new Error('Not found'));\n    }\n    return await res.json();\n  }\n\n  async fetchByID(id) {\n    const searchParams = new URLSearchParams({\n      api_key: API.API_KEY,\n    });\n\n    const res = await fetch(`${API.BASE_URL}/movie/${id}?${searchParams}`);\n    if (!res.ok) {\n      return Promise.reject(new Error('Not found'));\n    }\n    return await res.json();\n  }\n\n  async fetchCast(id) {\n    const searchParams = new URLSearchParams({\n      api_key: API.API_KEY,\n    });\n\n    const res = await fetch(\n      `${API.BASE_URL}/movie/${id}/credits?${searchParams}`\n    );\n    if (!res.ok) {\n      return Promise.reject(new Error('Not found'));\n    }\n    const { cast } = await res.json();\n    return cast.map(({ name, character, id, profile_path }) => ({\n      name,\n      character,\n      id,\n      profile_path,\n    }));\n  }\n\n  async fetchReviews(id) {\n    const searchParams = new URLSearchParams({\n      api_key: API.API_KEY,\n    });\n\n    const res = await fetch(\n      `${API.BASE_URL}/movie/${id}/reviews?${searchParams}`\n    );\n    if (!res.ok) {\n      return Promise.reject(new Error('Not found'));\n    }\n    const { results } = await res.json();\n    return results.map(({ author, content, id }) => ({ author, content, id }));\n  }\n}\n\nexport default API;\n","function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\n\nexport default function _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n        args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n\n      _next(undefined);\n    });\n  };\n}"],"names":["Wrapper","styled","Aditional","api","API","movieId","useParams","useState","movieDetails","setMovieDetails","loading","setLoading","location","useLocation","fetchByID","details","console","log","message","useEffect","getDetails","original_title","overview","poster_path","vote_average","genres","backPath","state","from","path","src","alt","map","genre","name","join","to","this","page","query","searchParams","URLSearchParams","api_key","API_KEY","fetch","BASE_URL","res","ok","Promise","reject","Error","json","id","cast","character","profile_path","results","author","content","asyncGeneratorStep","gen","resolve","_next","_throw","key","arg","info","value","error","done","then","_asyncToGenerator","fn","self","args","arguments","apply","err","undefined"],"sourceRoot":""}